{"version":3,"sources":["file:///Users/super_javan/cocoscreator/CrampedRoomOfDeathDungeon/assets/Scripts/Scene/UIBattleScene.ts"],"names":["Component","_decorator","levels","DataManager","TileMapManager","createNewNode","TILE_WIDTH","TILE_HEIGHT","ccclass","property","UIBattleScene","level","stage","start","initLevel","generateStage","generateTileMap","fitPos","Instance","mapInfo","mapColumCount","length","mapRowCount","stageNode","setParent","node","tileMapNode","tileMapManager","addComponent","init","disX","disY","setPosition"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,U,OAAAA,U;;AACbC,MAAAA,M;;AACAC,MAAAA,W;;AAEEC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;;;AAEHC,MAAAA,U,GAAa,E;AACbC,MAAAA,W,GAAc,E;OACd;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;+BAEjBS,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb,SACmCV,SADnC,CAC6C;AAAA;AAAA;AAAA,eACzCW,KADyC;AAAA,eAEzCC,KAFyC;AAAA;;AAGzCC,QAAAA,KAAK,GAAG;AACJ,eAAKC,SAAL;AACA,eAAKC,aAAL;AACA,eAAKC,eAAL;AACA,eAAKC,MAAL;AACH;;AAEDH,QAAAA,SAAS,GAAG;AACR,gBAAMH,KAAK,GAAG;AAAA;AAAA,gCAAQ,QAAO,CAAE,EAAjB,CAAd;;AAEA,cAAIA,KAAJ,EAAW;AACP,iBAAKA,KAAL,GAAaA,KAAb;AACA;AAAA;AAAA,4CAAYO,QAAZ,CAAqBC,OAArB,GAA+BR,KAAK,CAACQ,OAArC;AACA;AAAA;AAAA,4CAAYD,QAAZ,CAAqBE,aAArB,GAAqCT,KAAK,CAACQ,OAAN,CAAc,CAAd,EAAiBE,MAAtD,CAHO,CAGsD;;AAC7D;AAAA;AAAA,4CAAYH,QAAZ,CAAqBI,WAArB,GAAmCX,KAAK,CAACQ,OAAN,CAAcE,MAAjD;AACH;AACJ;;AAEDN,QAAAA,aAAa,GAAG;AACZ,gBAAMQ,SAAS,GAAG;AAAA;AAAA,+CAAlB;AACAA,UAAAA,SAAS,CAACC,SAAV,CAAoB,KAAKC,IAAzB;AACA,eAAKb,KAAL,GAAaW,SAAb;AACH;;AAEDP,QAAAA,eAAe,GAAG;AACd,gBAAMU,WAAW,GAAG;AAAA;AAAA,+CAApB;AACAA,UAAAA,WAAW,CAACF,SAAZ,CAAsB,KAAKZ,KAA3B;AACA,gBAAMe,cAAc,GAAGD,WAAW,CAACE,YAAZ;AAAA;AAAA,+CAAvB;AACAD,UAAAA,cAAc,CAACE,IAAf;AACH;;AAEDZ,QAAAA,MAAM,GAAG;AACL,gBAAM;AAAEG,YAAAA,aAAF;AAAiBE,YAAAA;AAAjB,cAAiC;AAAA;AAAA,0CAAYJ,QAAnD;AACA,gBAAMY,IAAI,GAAGxB,UAAU,GAAGgB,WAAb,GAA2B,CAAxC;AACA,gBAAMS,IAAI,GAAGxB,WAAW,GAAGa,aAAd,GAA8B,CAA9B,GAAkC,GAA/C;AACA,eAAKR,KAAL,CAAWoB,WAAX,CAAuB,CAACF,IAAxB,EAA8BC,IAA9B;AACH;;AAvCwC,O","sourcesContent":["import { Component, _decorator, Node } from \"cc\";\nimport levels, { ILevel } from \"../../Levels\";\nimport DataManager from \"../Runtime/DataManager\";\n// import { DataManager.Instance } from \"../Runtime/DataManager\";\nimport { TileMapManager } from \"../TileMap/TileMapManager\";\nimport { createNewNode } from \"../Utils\";\n\nconst TILE_WIDTH = 55\nconst TILE_HEIGHT = 55\nconst { ccclass, property } = _decorator;\n@ccclass('UIBattleScene')\nexport class UIBattleScene extends Component {\n    level: ILevel\n    stage: Node\n    start() {\n        this.initLevel()\n        this.generateStage()\n        this.generateTileMap()\n        this.fitPos()\n    }\n\n    initLevel() {\n        const level = levels[`level${1}`]\n\n        if (level) {\n            this.level = level\n            DataManager.Instance.mapInfo = level.mapInfo\n            DataManager.Instance.mapColumCount = level.mapInfo[0].length //åˆ—\n            DataManager.Instance.mapRowCount = level.mapInfo.length\n        }\n    }\n\n    generateStage() {\n        const stageNode = createNewNode()\n        stageNode.setParent(this.node)\n        this.stage = stageNode\n    }\n\n    generateTileMap() {\n        const tileMapNode = createNewNode()\n        tileMapNode.setParent(this.stage)\n        const tileMapManager = tileMapNode.addComponent(TileMapManager)\n        tileMapManager.init()\n    }\n\n    fitPos() {\n        const { mapColumCount, mapRowCount } = DataManager.Instance\n        const disX = TILE_WIDTH * mapRowCount / 2\n        const disY = TILE_HEIGHT * mapColumCount / 2 + 100\n        this.stage.setPosition(-disX, disY)\n    }\n}"]}