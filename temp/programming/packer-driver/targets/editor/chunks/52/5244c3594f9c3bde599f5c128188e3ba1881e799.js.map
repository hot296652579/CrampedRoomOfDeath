{"version":3,"sources":["file:///Users/super_javan/cocoscreator/CrampedRoomOfDeathDungeon/assets/Scripts/Door/DoorMgr.ts"],"names":["_decorator","DIRECTION_ENUM","ENITIY_TYPE_ENUM","ENTITY_STATE_ENUM","ENUM_EVENT","EnitiyMgr","EventMgr","DataManager","DoorStateMachine","MOVE_SPEED","ccclass","property","DoorMgr","init","fsm","addComponent","x","y","type","DOOR","state","IDLE","direction","TOP","onOpen","Instance","enemies","every","enemy","DEATH","onLoad","addEventListen","ENUM_OPEN_DOOR","onDestry","unEventListen"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAoBA,MAAAA,U,OAAAA,U;;AACXC,MAAAA,c,iBAAAA,c;AAAsCC,MAAAA,gB,iBAAAA,gB;AAAkBC,MAAAA,iB,iBAAAA,iB;AAAmBC,MAAAA,U,iBAAAA,U;;AAC3EC,MAAAA,S,iBAAAA,S;;AACFC,MAAAA,Q;;AAEAC,MAAAA,W;;AACEC,MAAAA,gB,iBAAAA,gB;;;;;;;;;4BAEIC,U,GAAa,IAAI,E;;OAExB;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;yBAEjBY,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb;AAAA;AAAA,kCACuC;AAEzB,cAAJC,IAAI,GAAG;AACT,eAAKC,GAAL,GAAW,KAAKC,YAAL;AAAA;AAAA,mDAAX;AACA,gBAAM,KAAKD,GAAL,CAASD,IAAT,EAAN;AAEA,gBAAMA,IAAN,CAAW;AACPG,YAAAA,CAAC,EAAE,CADI;AAEPC,YAAAA,CAAC,EAAE,CAFI;AAGPC,YAAAA,IAAI,EAAE;AAAA;AAAA,sDAAiBC,IAHhB;AAIPC,YAAAA,KAAK,EAAE;AAAA;AAAA,wDAAkBC,IAJlB;AAKPC,YAAAA,SAAS,EAAE;AAAA;AAAA,kDAAeC;AALnB,WAAX;AAQH;;AAEDC,QAAAA,MAAM,GAAG;AACL,cAAI;AAAA;AAAA,0CAAYC,QAAZ,CAAqBC,OAArB,CAA6BC,KAA7B,CAAmCC,KAAK,IAAIA,KAAK,CAACR,KAAN,KAAgB;AAAA;AAAA,sDAAkBS,KAA9E,KAAwF,KAAKT,KAAL,IAAc;AAAA;AAAA,sDAAkBS,KAA5H,EAAmI;AAC/H,iBAAKT,KAAL,GAAa;AAAA;AAAA,wDAAkBS,KAA/B;AACH;AACJ;;AAEDC,QAAAA,MAAM,GAAG;AACL;AAAA;AAAA,oCAASL,QAAT,CAAkBM,cAAlB,CAAiC;AAAA;AAAA,wCAAWC,cAA5C,EAA4D,KAAKR,MAAjE,EAAyE,IAAzE;AACH;;AAEDS,QAAAA,QAAQ,GAAG;AACP;AAAA;AAAA,oCAASR,QAAT,CAAkBS,aAAlB,CAAgC;AAAA;AAAA,wCAAWF,cAA3C,EAA2D,KAAKR,MAAhE;AACH;;AA5BkC,O","sourcesContent":["import { Component, _decorator, Node, Sprite, UITransform, Animation, SpriteAtlas, AnimationClip, animation, SpriteFrame, Texture2D, math, TiledUserNodeData } from \"cc\";\nimport { DIRECTION_ENUM, DIRECTION_ORDER_ENUM, ENITIY_TYPE_ENUM, ENTITY_STATE_ENUM, ENUM_EVENT, ENUM_BOTTOM_CONTROLLER, PARAMS_NAME_TYPE } from \"../../Enum\";\nimport { EnitiyMgr } from \"../Base/EnitiyMgr\";\nimport EventMgr from \"../Base/EventMgr\";\nimport { PlayerStateMachine } from \"../Player/PlayerStateMachine\";\nimport DataManager from \"../Runtime/DataManager\";\nimport { DoorStateMachine } from \"./DoorStateMachine\";\n\nexport const MOVE_SPEED = 1 / 10\n\nconst { ccclass, property } = _decorator;\n@ccclass('DoorMgr')\nexport class DoorMgr extends EnitiyMgr {\n\n    async init() {\n        this.fsm = this.addComponent(DoorStateMachine)\n        await this.fsm.init()\n\n        super.init({\n            x: 7,\n            y: 8,\n            type: ENITIY_TYPE_ENUM.DOOR,\n            state: ENTITY_STATE_ENUM.IDLE,\n            direction: DIRECTION_ENUM.TOP\n        })\n\n    }\n\n    onOpen() {\n        if (DataManager.Instance.enemies.every(enemy => enemy.state === ENTITY_STATE_ENUM.DEATH) && this.state != ENTITY_STATE_ENUM.DEATH) {\n            this.state = ENTITY_STATE_ENUM.DEATH\n        }\n    }\n\n    onLoad() {\n        EventMgr.Instance.addEventListen(ENUM_EVENT.ENUM_OPEN_DOOR, this.onOpen, this)\n    }\n\n    onDestry() {\n        EventMgr.Instance.unEventListen(ENUM_EVENT.ENUM_OPEN_DOOR, this.onOpen)\n    }\n\n\n}"]}