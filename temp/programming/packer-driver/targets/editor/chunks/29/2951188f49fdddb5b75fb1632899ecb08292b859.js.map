{"version":3,"sources":["file:///Users/super_javan/cocoscreator/CrampedRoomOfDeathDungeon/assets/Scripts/Door/DoorMgr.ts"],"names":["_decorator","ENTITY_STATE_ENUM","ENUM_EVENT","EnitiyMgr","EventMgr","DataManager","DoorStateMachine","MOVE_SPEED","ccclass","property","DoorMgr","init","params","fsm","addComponent","onOpen","Instance","enemies","every","enemy","state","DEATH","onLoad","addEventListen","ENUM_OPEN_DOOR","onDestry","onDestroy","unEventListen"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAoBA,MAAAA,U,OAAAA,U;;AAC6CC,MAAAA,iB,iBAAAA,iB;AAAmBC,MAAAA,U,iBAAAA,U;;AAE3EC,MAAAA,S,iBAAAA,S;;AACFC,MAAAA,Q;;AAEAC,MAAAA,W;;AACEC,MAAAA,gB,iBAAAA,gB;;;;;;;;;4BAEIC,U,GAAa,IAAI,E;;OAExB;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;yBAEjBU,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb;AAAA;AAAA,kCACuC;AAEzB,cAAJC,IAAI,CAACC,MAAD,EAAkB;AACxB,eAAKC,GAAL,GAAW,KAAKC,YAAL;AAAA;AAAA,mDAAX;AACA,gBAAM,KAAKD,GAAL,CAASF,IAAT,EAAN;AAEA,gBAAMA,IAAN,CAAWC,MAAX;AACH;;AAEDG,QAAAA,MAAM,GAAG;AACL,cAAI;AAAA;AAAA,0CAAYC,QAAZ,CAAqBC,OAArB,CAA6BC,KAA7B,CAAmCC,KAAK,IAAIA,KAAK,CAACC,KAAN,KAAgB;AAAA;AAAA,sDAAkBC,KAA9E,KAAwF,KAAKD,KAAL,IAAc;AAAA;AAAA,sDAAkBC,KAA5H,EAAmI;AAC/H,iBAAKD,KAAL,GAAa;AAAA;AAAA,wDAAkBC,KAA/B;AACH;AACJ;;AAEDC,QAAAA,MAAM,GAAG;AACL;AAAA;AAAA,oCAASN,QAAT,CAAkBO,cAAlB,CAAiC;AAAA;AAAA,wCAAWC,cAA5C,EAA4D,KAAKT,MAAjE,EAAyE,IAAzE;AACH;;AAEDU,QAAAA,QAAQ,GAAG;AACP,gBAAMC,SAAN;AACA;AAAA;AAAA,oCAASV,QAAT,CAAkBW,aAAlB,CAAgC;AAAA;AAAA,wCAAWH,cAA3C,EAA2D,KAAKT,MAAhE;AACH;;AAtBkC,O","sourcesContent":["import { Component, _decorator, Node, Sprite, UITransform, Animation, SpriteAtlas, AnimationClip, animation, SpriteFrame, Texture2D, math, TiledUserNodeData } from \"cc\";\nimport { DIRECTION_ENUM, DIRECTION_ORDER_ENUM, ENITIY_TYPE_ENUM, ENTITY_STATE_ENUM, ENUM_EVENT, ENUM_BOTTOM_CONTROLLER, PARAMS_NAME_TYPE } from \"../../Enum\";\nimport { IEnitiy } from \"../../Levels\";\nimport { EnitiyMgr } from \"../Base/EnitiyMgr\";\nimport EventMgr from \"../Base/EventMgr\";\nimport { PlayerStateMachine } from \"../Player/PlayerStateMachine\";\nimport DataManager from \"../Runtime/DataManager\";\nimport { DoorStateMachine } from \"./DoorStateMachine\";\n\nexport const MOVE_SPEED = 1 / 10\n\nconst { ccclass, property } = _decorator;\n@ccclass('DoorMgr')\nexport class DoorMgr extends EnitiyMgr {\n\n    async init(params: IEnitiy) {\n        this.fsm = this.addComponent(DoorStateMachine)\n        await this.fsm.init()\n\n        super.init(params)\n    }\n\n    onOpen() {\n        if (DataManager.Instance.enemies.every(enemy => enemy.state === ENTITY_STATE_ENUM.DEATH) && this.state != ENTITY_STATE_ENUM.DEATH) {\n            this.state = ENTITY_STATE_ENUM.DEATH\n        }\n    }\n\n    onLoad() {\n        EventMgr.Instance.addEventListen(ENUM_EVENT.ENUM_OPEN_DOOR, this.onOpen, this)\n    }\n\n    onDestry() {\n        super.onDestroy()\n        EventMgr.Instance.unEventListen(ENUM_EVENT.ENUM_OPEN_DOOR, this.onOpen)\n    }\n\n\n}"]}