{"version":3,"sources":["file:///Users/super_javan/cocoscreator/CrampedRoomOfDeathDungeon/assets/Scripts/Runtime/AudioMgr.ts"],"names":["AudioMgr","Node","AudioSource","AudioClip","resources","director","inst","_inst","constructor","_aduioMusic","_audioSource","audioMgr","name","getScene","addChild","addPersistRootNode","addComponent","audioSource","playOneShot","sound","volume","load","err","clip","console","log","play","isLoop","loop","stop","pause","resume"],"mappings":"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","sourcesContent":["//AudioMgr.ts\nimport { Node, AudioSource, AudioClip, resources, director } from 'cc';\n/**\n * @en\n * this is a sington class for audio play, can be easily called from anywhere in you project.\n * @zh\n * 这是一个用于播放音频的单件类，可以很方便地在项目的任何地方调用。\n */\nexport class AudioMgr {\n    private static _inst: AudioMgr;\n    public static get inst(): AudioMgr {\n        if (this._inst == null) {\n            this._inst = new AudioMgr();\n        }\n        return this._inst;\n    }\n\n    private _aduioMusic: AudioSource\n    private _audioSource: AudioSource;\n    constructor() {\n        //@en create a node as audioMgr\n        //@zh 创建一个节点作为 audioMgr\n        let audioMgr = new Node();\n        audioMgr.name = '__audioMgr__';\n\n        //@en add to the scene.\n        //@zh 添加节点到场景\n        director.getScene().addChild(audioMgr);\n\n        //@en make it as a persistent node, so it won't be destroied when scene change.\n        //@zh 标记为常驻节点，这样场景切换的时候就不会被销毁了\n        director.addPersistRootNode(audioMgr);\n\n        //@en add AudioSource componrnt to play audios.\n        //@zh 添加 AudioSource 组件，用于播放音频。\n        this._audioSource = audioMgr.addComponent(AudioSource);\n        this._aduioMusic = audioMgr.addComponent(AudioSource);\n    }\n\n    public get audioSource() {\n        return this._audioSource;\n    }\n\n    /**\n     * @en\n     * play short audio, such as strikes,explosions\n     * @zh\n     * 播放短音频,比如 打击音效，爆炸音效等\n     * @param sound clip or url for the audio\n     * @param volume \n     */\n    playOneShot(sound: AudioClip | string, volume: number = 1.0) {\n        if (sound instanceof AudioClip) {\n            this._audioSource.playOneShot(sound, volume);\n        }\n        else {\n            resources.load(sound, (err, clip: AudioClip) => {\n                if (err) {\n                    console.log(err);\n                }\n                else {\n                    this._audioSource.playOneShot(clip, volume);\n                }\n            });\n        }\n    }\n\n    /**\n     * @en\n     * play long audio, such as the bg music\n     * @zh\n     * 播放长音频，比如 背景音乐\n     * @param sound clip or url for the sound\n     * @param volume \n     */\n    play(sound: AudioClip | string, volume: number = 1.0, isLoop: boolean = false) {\n        if (sound instanceof AudioClip) {\n            this._aduioMusic.clip = sound;\n            this._aduioMusic.play();\n            this._aduioMusic.loop = isLoop\n            this.audioSource.volume = volume;\n        }\n        else {\n            resources.load(sound, (err, clip: AudioClip) => {\n                if (err) {\n                    console.log(err);\n                }\n                else {\n                    this._aduioMusic.clip = clip;\n                    this._aduioMusic.loop = isLoop\n                    this._aduioMusic.play();\n                    this.audioSource.volume = volume;\n                }\n            });\n        }\n    }\n\n    /**\n     * stop the audio play\n     */\n    stop() {\n        this._audioSource.stop();\n    }\n\n    /**\n     * pause the audio play\n     */\n    pause() {\n        this._audioSource.pause();\n    }\n\n    /**\n     * resume the audio play\n     */\n    resume() {\n        this._audioSource.play();\n    }\n}"]}