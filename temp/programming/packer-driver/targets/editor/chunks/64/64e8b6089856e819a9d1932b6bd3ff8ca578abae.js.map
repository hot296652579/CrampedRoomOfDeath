{"version":3,"sources":["file:///Users/super_javan/cocoscreator/CrampedRoomOfDeathDungeon/assets/Scripts/Player/PlayerMgr.ts"],"names":["_decorator","DIRECTION_ENUM","ENTITY_STATE_ENUM","ENUM_EVENT","ENUM_BOTTOM_CONTROLLER","SHAKE_TYPE_ENUM","EventMgr","DataManager","PlayerStateMachine","EnitiyMgr","AudioMgr","MOVE_SPEED","ccclass","property","PlayerMrg","targetX","targetY","isMoving","init","params","fsm","addComponent","x","y","onLoad","Instance","addEventListen","ENUM_MOVE_PLAYER","inputHanlder","ENUM_PLAYER_DEATH","onDeathHanlder","onDestry","unEventListen","update","updateXY","Math","abs","emit","ENUM_MOVE_END","inputDirection","state","DEATH","AIRDEATH","ATTACK","enemyId","willAttack","inst","playOneShot","ENUM_ENEMY_DEATH","ENUM_OPEN_DOOR","ENUM_RECORD_STEP","willBlock","TOP","ENUM_SHAKE_SCREEN","BOTTOM","LEFT","RIGHT","TURNLEFT","direction","TURNRIGHT","handlerMove","type","tileMgrInfo","enemies","filter","enemy","doorX","doorY","doorState","doorInfo","bursts","burst","mapRowCount","row","mapColumCount","column","playerNextY","BLOCKFRONT","weaponNextY","nextPlayerTile","nextWeaponTile","i","length","enemyX","enemyY","some","canTurn","canMove","BLOCKBACK","BLOCKRIGHT","weaponNextX","BLOCKLEFT","playerNextX","nextY","nextX","BLOCKTURNLEFT","BLOCKTURNRIGHT","index","id","onSmokeHandler","ENUM_SHOW_SMOKE","onAttackShake"],"mappings":"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","sourcesContent":["import { Component, _decorator, Node, Sprite, UITransform, Animation, SpriteAtlas, AnimationClip, animation, SpriteFrame, Texture2D, math } from \"cc\";\nimport { DIRECTION_ENUM, DIRECTION_ORDER_ENUM, ENITIY_TYPE_ENUM, ENTITY_STATE_ENUM, ENUM_EVENT, ENUM_BOTTOM_CONTROLLER, PARAMS_NAME_TYPE, SHAKE_TYPE_ENUM } from \"../../Enum\";\nimport levels, { IEnitiy, ILevel } from \"../../Levels\";\nimport EventMgr from \"../Base/EventMgr\";\nimport ResourceLoadMgr from \"../Base/ResourceLoadMgr\";\nimport DataManager from \"../Runtime/DataManager\";\nimport { TILE_HEIGHT, TILE_WIDTH } from \"../TileMap/TileManager\";\n// import { DataManager.Instance } from \"../Runtime/DataManager\";\nimport { TileMapManager } from \"../TileMap/TileMapManager\";\nimport { createNewNode } from \"../Utils\";\nimport { PlayerStateMachine } from \"./PlayerStateMachine\";\nimport { EnitiyMgr } from \"../Base/EnitiyMgr\";\nimport { EnemyMgr } from \"../Base/EnemyMgr\";\nimport { BurstMgr } from \"../Burst/BurstMgr\";\nimport SoundMgr from \"../Runtime/SoundMgr\";\nimport { AudioMgr } from \"../Runtime/AudioMgr\";\n\nexport const MOVE_SPEED = 1 / 10\n\nconst { ccclass, property } = _decorator;\n@ccclass('PlayerMrg')\nexport class PlayerMrg extends EnitiyMgr {\n\n    targetX: number = 0\n    targetY: number = 0\n    isMoving: boolean = false\n\n    async init(params: IEnitiy) {\n        this.fsm = this.addComponent(PlayerStateMachine)\n        await this.fsm.init()\n\n        super.init(params)\n\n        this.targetX = this.x\n        this.targetY = this.y\n    }\n\n    onLoad() {\n        EventMgr.Instance.addEventListen(ENUM_EVENT.ENUM_MOVE_PLAYER, this.inputHanlder, this)\n        EventMgr.Instance.addEventListen(ENUM_EVENT.ENUM_PLAYER_DEATH, this.onDeathHanlder, this)\n    }\n\n    onDestry() {\n        EventMgr.Instance.unEventListen(ENUM_EVENT.ENUM_MOVE_PLAYER, this.inputHanlder)\n        EventMgr.Instance.unEventListen(ENUM_EVENT.ENUM_PLAYER_DEATH, this.onDeathHanlder)\n    }\n\n    update() {\n        this.updateXY()\n        super.update()\n    }\n\n    updateXY() {\n        if (this.targetX < this.x) {\n            this.x -= MOVE_SPEED\n        } else if (this.targetX > this.x) {\n            this.x += MOVE_SPEED\n        } else if (this.targetY < this.y) {\n            this.y -= MOVE_SPEED\n        } else if (this.targetY > this.y) {\n            this.y += MOVE_SPEED\n        }\n\n        if (Math.abs(this.targetX - this.x) <= 0.01 && Math.abs(this.targetY - this.y) <= 0.01 && this.isMoving) {\n            this.x = this.targetX\n            this.y = this.targetY\n            this.isMoving = false\n            EventMgr.Instance.emit(ENUM_EVENT.ENUM_MOVE_END)\n        }\n    }\n\n    inputHanlder(inputDirection: ENUM_BOTTOM_CONTROLLER) {\n        if (this.state === ENTITY_STATE_ENUM.DEATH || this.state === ENTITY_STATE_ENUM.AIRDEATH || this.state === ENTITY_STATE_ENUM.ATTACK)\n            return\n\n        if (this.isMoving)\n            return\n\n\n        const enemyId = this.willAttack(inputDirection)\n        if (enemyId) {\n            AudioMgr.inst.playOneShot('sound/attack')\n            this.state = ENTITY_STATE_ENUM.ATTACK\n            EventMgr.Instance.emit(ENUM_EVENT.ENUM_ENEMY_DEATH, enemyId)\n            EventMgr.Instance.emit(ENUM_EVENT.ENUM_OPEN_DOOR)\n            EventMgr.Instance.emit(ENUM_EVENT.ENUM_MOVE_END)\n            EventMgr.Instance.emit(ENUM_EVENT.ENUM_RECORD_STEP)\n            return\n        }\n\n        if (this.willBlock(inputDirection)) {\n            if (inputDirection === ENUM_BOTTOM_CONTROLLER.TOP) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.TOP)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.BOTTOM) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.BOTTOM)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.LEFT) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.LEFT)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.RIGHT) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.RIGHT)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.TURNLEFT && this.direction === DIRECTION_ENUM.TOP) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.LEFT)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.TURNLEFT && this.direction === DIRECTION_ENUM.LEFT) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.BOTTOM)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.TURNLEFT && this.direction === DIRECTION_ENUM.BOTTOM) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.RIGHT)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.TURNLEFT && this.direction === DIRECTION_ENUM.RIGHT) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.TOP)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.TURNRIGHT && this.direction === DIRECTION_ENUM.TOP) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.RIGHT)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.TURNRIGHT && this.direction === DIRECTION_ENUM.LEFT) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.TOP)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.TURNRIGHT && this.direction === DIRECTION_ENUM.BOTTOM) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.LEFT)\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.TURNRIGHT && this.direction === DIRECTION_ENUM.RIGHT) {\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, SHAKE_TYPE_ENUM.BOTTOM)\n            }\n            return\n        }\n\n        this.handlerMove(inputDirection)\n    }\n\n    onDeathHanlder(type: ENTITY_STATE_ENUM) {\n        this.state = type\n        AudioMgr.inst.playOneShot('sound/death')\n    }\n\n    willBlock(type: ENUM_BOTTOM_CONTROLLER) {\n        const { targetX: x, targetY: y, direction } = this\n        const { tileMgrInfo } = DataManager.Instance\n        const enemies: EnemyMgr[] = DataManager.Instance.enemies.filter(\n            (enemy: EnemyMgr) => enemy.state !== ENTITY_STATE_ENUM.DEATH,\n        )\n        const { x: doorX, y: doorY, state: doorState } = DataManager.Instance.doorInfo || {}\n        const bursts: BurstMgr[] = DataManager.Instance.bursts.filter(\n            (burst: BurstMgr) => burst.state !== ENTITY_STATE_ENUM.DEATH,\n        )\n\n        const { mapRowCount: row, mapColumCount: column } = DataManager.Instance\n\n        //按钮方向——向上\n        if (type === ENUM_BOTTOM_CONTROLLER.TOP) {\n            const playerNextY = y - 1\n\n            //玩家方向——向上\n            if (direction === DIRECTION_ENUM.TOP) {\n                //判断是否超出地图\n                if (playerNextY < 0) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                    return true\n                }\n\n                const weaponNextY = y - 2\n                const nextPlayerTile = tileMgrInfo[x]?.[playerNextY]\n                const nextWeaponTile = tileMgrInfo[x]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === x && doorY === playerNextY) || (doorX === x && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                    return true\n                }\n\n                // 判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === x && enemyY === weaponNextY) || (enemyX === x && enemyY === playerNextY)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === x && burst.y === playerNextY) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                    return true\n                }\n\n                //玩家方向——向下\n            } else if (direction === DIRECTION_ENUM.BOTTOM) {\n                //判断是否超出地图\n                if (playerNextY < 0) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                    return true\n                }\n\n                const weaponNextY = y\n                const nextPlayerTile = tileMgrInfo[x]?.[playerNextY]\n                const nextWeaponTile = tileMgrInfo[x]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === x && doorY === playerNextY) || (doorX === x && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if (enemyX === x && enemyY === playerNextY) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === x && burst.y === playerNextY) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                    return true\n                }\n\n                //玩家方向——向左\n            } else if (direction === DIRECTION_ENUM.LEFT) {\n                //判断是否超出地图\n                if (playerNextY < 0) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                    return true\n                }\n\n                const weaponNextX = x - 1\n                const weaponNextY = y - 1\n                const nextPlayerTile = tileMgrInfo[x]?.[playerNextY]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === x && doorY === playerNextY) || (doorX === weaponNextX && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === x && enemyY === playerNextY) || (enemyX === weaponNextX && enemyY === weaponNextY)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === x && burst.y === playerNextY) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                    return true\n                }\n\n                //玩家方向——向右\n            } else if (direction === DIRECTION_ENUM.RIGHT) {\n                //判断是否超出地图\n                if (playerNextY < 0) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                    return true\n                }\n\n                const weaponNextX = x + 1\n                const weaponNextY = y - 1\n                const nextPlayerTile = tileMgrInfo[x]?.[playerNextY]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === x && doorY === playerNextY) || (doorX === weaponNextX && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === x && enemyY === playerNextY) || (enemyX === weaponNextX && enemyY === weaponNextY)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                        return true\n                    }\n                }\n\n                // 判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === x && burst.y === playerNextY) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                    return true\n                }\n            }\n\n            //按钮方向——向下\n        } else if (type === ENUM_BOTTOM_CONTROLLER.BOTTOM) {\n            const playerNextY = y + 1\n\n            //玩家方向——向上\n            if (direction === DIRECTION_ENUM.TOP) {\n                if (playerNextY > column - 1) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n\n                    return true\n                }\n\n                const weaponNextY = y\n                const nextPlayerTile = tileMgrInfo[x]?.[playerNextY]\n                const nextWeaponTile = tileMgrInfo[x]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === x && doorY === playerNextY) || (doorX === x && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if (enemyX === x && enemyY === playerNextY) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                        return true\n                    }\n                }\n\n                // 判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === x && burst.y === playerNextY) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                    return true\n                }\n\n                //玩家方向——向下\n            } else if (direction === DIRECTION_ENUM.BOTTOM) {\n                if (playerNextY > column - 1) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n\n                    return true\n                }\n\n                const weaponNextY = y + 2\n                const nextPlayerTile = tileMgrInfo[x]?.[playerNextY]\n                const nextWeaponTile = tileMgrInfo[x]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === x && doorY === playerNextY) || (doorX === x && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                    return true\n                }\n\n                // 判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === x && enemyY === weaponNextY) || (enemyX === x && enemyY === playerNextY)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === x && burst.y === playerNextY) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                    return true\n                }\n\n                //玩家方向——向左\n            } else if (direction === DIRECTION_ENUM.LEFT) {\n                if (playerNextY > column - 1) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n\n                    return true\n                }\n\n                const weaponNextX = x - 1\n                const weaponNextY = y + 1\n                const nextPlayerTile = tileMgrInfo[x]?.[playerNextY]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === x && doorY === playerNextY) || (doorX === weaponNextX && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === x && enemyY === playerNextY) || (enemyX === weaponNextX && enemyY === weaponNextY)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === x && burst.y === playerNextY) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                    return true\n                }\n\n                //玩家方向——向右\n            } else if (direction === DIRECTION_ENUM.RIGHT) {\n                if (playerNextY > column - 1) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n\n                    return true\n                }\n\n                const weaponNextX = x + 1\n                const weaponNextY = y + 1\n                const nextPlayerTile = tileMgrInfo[x]?.[playerNextY]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === x && doorY === playerNextY) || (doorX === weaponNextX && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === x && enemyY === playerNextY) || (enemyX === weaponNextX && enemyY === weaponNextY)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === x && burst.y === playerNextY) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                    return true\n                }\n            }\n\n            //按钮方向——向左\n        } else if (type === ENUM_BOTTOM_CONTROLLER.LEFT) {\n            const playerNextX = x - 1\n\n            //玩家方向——向上\n            if (direction === DIRECTION_ENUM.TOP) {\n                //判断是否超出地图\n                if (playerNextX < 0) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n\n                    return true\n                }\n\n                const weaponNextX = x - 1\n                const weaponNextY = y - 1\n                const nextPlayerTile = tileMgrInfo[playerNextX]?.[y]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === playerNextX && doorY === y) || (doorX === weaponNextX && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === playerNextX && enemyY === y) || (enemyX === weaponNextX && enemyY === weaponNextY)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === playerNextX && burst.y === y) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                    return true\n                }\n\n                //玩家方向——向下\n            } else if (direction === DIRECTION_ENUM.BOTTOM) {\n                //判断是否超出地图\n                if (playerNextX < 0) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n\n                    return true\n                }\n\n                const weaponNextX = x - 1\n                const weaponNextY = y + 1\n                const nextPlayerTile = tileMgrInfo[playerNextX]?.[y]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === playerNextX && doorY === y) || (doorX === weaponNextX && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === playerNextX && enemyY === y) || (enemyX === weaponNextX && enemyY === weaponNextY)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === playerNextX && burst.y === y) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                    return true\n                }\n\n                //玩家方向——向左\n            } else if (direction === DIRECTION_ENUM.LEFT) {\n                //判断是否超出地图\n                if (playerNextX < 0) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n\n                    return true\n                }\n\n                const weaponNextX = x - 2\n                const nextPlayerTile = tileMgrInfo[playerNextX]?.[y]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[y]\n\n                //判断门\n                if (\n                    ((doorX === playerNextX && doorY === y) || (doorX === weaponNextX && doorY === y)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === playerNextX && enemyY === y) || (enemyX === weaponNextX && enemyY === y)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === playerNextX && burst.y === y) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                    return true\n                }\n\n                //玩家方向——向右\n            } else if (direction === DIRECTION_ENUM.RIGHT) {\n                //判断是否超出地图\n                if (playerNextX < 0) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n\n                    return true\n                }\n\n                const weaponNextX = x\n                const nextPlayerTile = tileMgrInfo[playerNextX]?.[y]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[y]\n\n                //判断门\n                if (\n                    ((doorX === playerNextX && doorY === y) || (doorX === weaponNextX && doorY === y)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if (enemyX === playerNextX && enemyY === y) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === playerNextX && burst.y === y) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                    return true\n                }\n            }\n\n            //按钮方向——向右\n        } else if (type === ENUM_BOTTOM_CONTROLLER.RIGHT) {\n            const playerNextX = x + 1\n\n            //玩家方向——向上\n            if (direction === DIRECTION_ENUM.TOP) {\n                if (playerNextX > row - 1) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n\n                    return true\n                }\n\n                const weaponNextX = x + 1\n                const weaponNextY = y - 1\n                const nextPlayerTile = tileMgrInfo[playerNextX]?.[y]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === playerNextX && doorY === y) || (doorX === weaponNextX && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === playerNextX && enemyY === y) || (enemyX === weaponNextX && enemyY === weaponNextY)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === playerNextX && burst.y === y) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKRIGHT\n                    return true\n                }\n\n                //玩家方向——向下\n            } else if (direction === DIRECTION_ENUM.BOTTOM) {\n                if (playerNextX > row - 1) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n\n                    return true\n                }\n\n                const weaponNextX = x + 1\n                const weaponNextY = y + 1\n                const nextPlayerTile = tileMgrInfo[playerNextX]?.[y]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[weaponNextY]\n\n                //判断门\n                if (\n                    ((doorX === playerNextX && doorY === y) || (doorX === weaponNextX && doorY === weaponNextY)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === playerNextX && enemyY === y) || (enemyX === weaponNextX && enemyY === weaponNextY)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === playerNextX && burst.y === y) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKLEFT\n                    return true\n                }\n\n                //玩家方向——向左\n            } else if (direction === DIRECTION_ENUM.LEFT) {\n                if (playerNextX > row - 1) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n\n                    return true\n                }\n\n                const weaponNextX = x\n                const nextPlayerTile = tileMgrInfo[playerNextX]?.[y]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[y]\n\n                //判断门\n                if (\n                    ((doorX === playerNextX && doorY === y) || (doorX === weaponNextX && doorY === y)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if (enemyX === playerNextX && enemyY === y) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === playerNextX && burst.y === y) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKBACK\n                    return true\n                }\n\n                //玩家方向——向右\n            } else if (direction === DIRECTION_ENUM.RIGHT) {\n                if (playerNextX > row - 1) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n\n                    return true\n                }\n\n                const weaponNextX = x + 2\n                const nextPlayerTile = tileMgrInfo[playerNextX]?.[y]\n                const nextWeaponTile = tileMgrInfo[weaponNextX]?.[y]\n\n                //判断门\n                if (\n                    ((doorX === playerNextX && doorY === y) || (doorX === weaponNextX && doorY === y)) &&\n                    doorState !== ENTITY_STATE_ENUM.DEATH\n                ) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                    return true\n                }\n\n                //判断敌人\n                for (let i = 0; i < enemies.length; i++) {\n                    const enemy = enemies[i]\n                    const { x: enemyX, y: enemyY } = enemy\n\n                    if ((enemyX === playerNextX && enemyY === y) || (enemyX === weaponNextX && enemyY === y)) {\n                        this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                        return true\n                    }\n                }\n\n                //判断地裂陷阱\n                if (\n                    bursts.some(burst => burst.x === playerNextX && burst.y === y) &&\n                    (!nextWeaponTile || nextWeaponTile.canTurn)\n                ) {\n                    return false\n                }\n\n                //最后判断地图元素\n                if (nextPlayerTile && nextPlayerTile.canMove && (!nextWeaponTile || nextWeaponTile.canTurn)) {\n                    // empty\n                } else {\n                    this.state = ENTITY_STATE_ENUM.BLOCKFRONT\n                    return true\n                }\n            }\n\n            //按钮方向——左转\n        } else if (type === ENUM_BOTTOM_CONTROLLER.TURNLEFT) {\n            let nextY, nextX\n            if (direction === DIRECTION_ENUM.TOP) {\n                //朝上左转的话，左上角三个tile都必须turnable为true，并且没有敌人\n                nextY = y - 1\n                nextX = x - 1\n            } else if (direction === DIRECTION_ENUM.BOTTOM) {\n                nextY = y + 1\n                nextX = x + 1\n            } else if (direction === DIRECTION_ENUM.LEFT) {\n                nextY = y + 1\n                nextX = x - 1\n            } else if (direction === DIRECTION_ENUM.RIGHT) {\n                nextY = y - 1\n                nextX = x + 1\n            }\n\n            //判断门\n            if (\n                ((doorX === x && doorY === nextY) ||\n                    (doorX === nextX && doorY === y) ||\n                    (doorX === nextX && doorY === nextY)) &&\n                doorState !== ENTITY_STATE_ENUM.DEATH\n            ) {\n                this.state = ENTITY_STATE_ENUM.BLOCKTURNLEFT\n                return true\n            }\n\n            //判断敌人\n            for (let i = 0; i < enemies.length; i++) {\n                const enemy = enemies[i]\n                const { x: enemyX, y: enemyY } = enemy\n\n                if (enemyX === nextX && enemyY === y) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKTURNLEFT\n\n                    return true\n                } else if (enemyX === nextX && enemyY === nextY) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKTURNLEFT\n\n                    return true\n                } else if (enemyX === x && enemyY === nextY) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKTURNLEFT\n\n                    return true\n                }\n            }\n\n            //最后判断地图元素\n            if (\n                (!tileMgrInfo[x]?.[nextY] || tileMgrInfo[x]?.[nextY].canTurn) &&\n                (!tileMgrInfo[nextX]?.[y] || tileMgrInfo[nextX]?.[y].canTurn) &&\n                (!tileMgrInfo[nextX]?.[nextY] || tileMgrInfo[nextX]?.[nextY].canTurn)\n            ) {\n                // empty\n            } else {\n                this.state = ENTITY_STATE_ENUM.BLOCKTURNLEFT\n                return true\n            }\n\n            //按钮方向——右转\n        } else if (type === ENUM_BOTTOM_CONTROLLER.TURNRIGHT) {\n            let nextX, nextY\n            if (direction === DIRECTION_ENUM.TOP) {\n                //朝上右转的话，右上角三个tile都必须turnable为true\n                nextY = y - 1\n                nextX = x + 1\n            } else if (direction === DIRECTION_ENUM.BOTTOM) {\n                nextY = y + 1\n                nextX = x - 1\n            } else if (direction === DIRECTION_ENUM.LEFT) {\n                nextY = y - 1\n                nextX = x - 1\n            } else if (direction === DIRECTION_ENUM.RIGHT) {\n                nextY = y + 1\n                nextX = x + 1\n            }\n\n            //判断门\n            if (\n                ((doorX === x && doorY === nextY) ||\n                    (doorX === nextX && doorY === y) ||\n                    (doorX === nextX && doorY === nextY)) &&\n                doorState !== ENTITY_STATE_ENUM.DEATH\n            ) {\n                this.state = ENTITY_STATE_ENUM.BLOCKTURNRIGHT\n                return true\n            }\n\n            //判断敌人\n            for (let i = 0; i < enemies.length; i++) {\n                const enemy = enemies[i]\n                const { x: enemyX, y: enemyY } = enemy\n\n                if (enemyX === nextX && enemyY === y) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKTURNRIGHT\n\n                    return true\n                } else if (enemyX === nextX && enemyY === nextY) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKTURNRIGHT\n\n                    return true\n                } else if (enemyX === x && enemyY === nextY) {\n                    this.state = ENTITY_STATE_ENUM.BLOCKTURNRIGHT\n\n                    return true\n                }\n            }\n\n            //最后判断地图元素\n            if (\n                (!tileMgrInfo[x]?.[nextY] || tileMgrInfo[x]?.[nextY].canTurn) &&\n                (!tileMgrInfo[nextX]?.[y] || tileMgrInfo[nextX]?.[y].canTurn) &&\n                (!tileMgrInfo[nextX]?.[nextY] || tileMgrInfo[nextX]?.[nextY].canTurn)\n            ) {\n                // empty\n            } else {\n                this.state = ENTITY_STATE_ENUM.BLOCKTURNRIGHT\n                return true\n            }\n        }\n\n        return false\n    }\n\n    // checkCollisionDoor(playerNext, weaponNext, state: ENTITY_STATE_ENUM, inputDirection: ENUM_BOTTOM_CONTROLLER) {\n    //     const { targetX: x, targetY: y, direction } = this\n    //     const { x: doorX, y: doorY, state: doorState } = DataManager.Instance.doorInfo\n\n    //     if (inputDirection === ENUM_BOTTOM_CONTROLLER.TOP || inputDirection === ENUM_BOTTOM_CONTROLLER.BOTTOM) {\n    //         //判断上下门\n    //         if (\n    //             ((doorX === x && doorY === playerNext) || (doorX === x && doorY === weaponNext)) &&\n    //             doorState !== ENTITY_STATE_ENUM.DEATH\n    //         ) {\n    //             this.state = state\n    //             console.log('撞到了门')\n    //             return true\n    //         }\n    //     } else {\n    //         //判断左右门\n    //         if (\n    //             ((doorX === playerNext && doorY === y) || (doorX === weaponNext && doorY === weaponNext)) &&\n    //             doorState !== ENTITY_STATE_ENUM.DEATH\n    //         ) {\n    //             this.state = state\n    //             console.log('撞到了门')\n    //             return true\n    //         }\n    //     }\n\n\n\n    //     return false\n    // }\n\n    // checkCollisionEnenies(playerNext, weaponNext, state: ENTITY_STATE_ENUM, inputDirection: ENUM_BOTTOM_CONTROLLER) {\n    //     const { targetX: x, targetY: y, direction } = this\n    //     const enemies: EnemyMgr[] = DataManager.Instance.enemies.filter(enemy => enemy.state != ENTITY_STATE_ENUM.DEATH)\n\n    //     if (inputDirection === ENUM_BOTTOM_CONTROLLER.TOP || inputDirection === ENUM_BOTTOM_CONTROLLER.BOTTOM) {\n    //         for (let i = 0; i < enemies.length; i++) {\n    //             const enemy = enemies[i]\n    //             const { x: enemyX, y: enemyY } = enemy\n\n    //             if ((enemyX === x && enemyY === weaponNext) || (enemyX === x && enemyY === playerNext)) {\n    //                 this.state = state\n    //                 console.log('撞到了敌人')\n    //                 return true\n    //             }\n    //         }\n    //     }\n\n    //     return false\n    // }\n\n    // //判断地裂陷阱\n    // checkBurstCollision(playerNext, nextWeaponTile, inputDirection: ENUM_BOTTOM_CONTROLLER) {\n    //     const { targetX: x, targetY: y, direction } = this\n    //     const bursts: BurstMgr[] = DataManager.Instance.bursts.filter(\n    //         (burst: BurstMgr) => burst.state !== ENTITY_STATE_ENUM.DEATH,\n    //     )\n\n    //     if (\n    //         bursts.some(burst => burst.x === x && burst.y === playerNext) &&\n    //         (!nextWeaponTile || nextWeaponTile.canTurn)\n    //     ) {\n    //         return false\n    //     }\n    // }\n\n    willAttack(inputDirection: ENUM_BOTTOM_CONTROLLER) {\n        // let enemies = DataManager.Instance.enemies.filter(enemy => enemy.state != ENTITY_STATE_ENUM.DEATH)\n        let enemies = DataManager.Instance.enemies.filter((enemy) => { return enemy.state != ENTITY_STATE_ENUM.DEATH })\n\n        for (let index = 0; index < enemies.length; index++) {\n            const { x: enemyX, y: enemyY, id } = enemies[index];\n            if (inputDirection === ENUM_BOTTOM_CONTROLLER.TOP && this.direction === DIRECTION_ENUM.TOP && enemyX == this.x && enemyY == this.y - 2) {\n                this.state = ENTITY_STATE_ENUM.ATTACK\n                return id\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.BOTTOM && this.direction === DIRECTION_ENUM.BOTTOM && enemyX == this.x && enemyY == this.y + 2) {\n                this.state = ENTITY_STATE_ENUM.ATTACK\n                return id\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.LEFT && this.direction === DIRECTION_ENUM.LEFT && enemyX == this.x - 2 && enemyY == this.y) {\n                this.state = ENTITY_STATE_ENUM.ATTACK\n                return id\n            } else if (inputDirection === ENUM_BOTTOM_CONTROLLER.RIGHT && this.direction === DIRECTION_ENUM.RIGHT && enemyX == this.x + 2 && enemyY == this.y) {\n                this.state = ENTITY_STATE_ENUM.ATTACK\n                return id\n            }\n        }\n\n        return ''\n    }\n\n    handlerMove(direction: ENUM_BOTTOM_CONTROLLER) {\n        EventMgr.Instance.emit(ENUM_EVENT.ENUM_RECORD_STEP)\n        switch (direction) {\n            case ENUM_BOTTOM_CONTROLLER.TOP:\n                this.isMoving = true\n                this.onSmokeHandler(direction)\n                this.targetY -= 1\n                AudioMgr.inst.playOneShot('sound/move')\n                break;\n            case ENUM_BOTTOM_CONTROLLER.BOTTOM:\n                this.isMoving = true\n                this.onSmokeHandler(direction)\n                this.targetY += 1\n                AudioMgr.inst.playOneShot('sound/move')\n                break;\n            case ENUM_BOTTOM_CONTROLLER.LEFT:\n                this.isMoving = true\n                this.onSmokeHandler(direction)\n                this.targetX -= 1\n                AudioMgr.inst.playOneShot('sound/move')\n                break;\n            case ENUM_BOTTOM_CONTROLLER.RIGHT:\n                this.isMoving = true\n                this.onSmokeHandler(direction)\n                this.targetX += 1\n                AudioMgr.inst.playOneShot('sound/move')\n                break;\n            case ENUM_BOTTOM_CONTROLLER.TURNLEFT:\n                // this.fsm.setParams(PARAMS_NAME_TYPE.TURNLEFT, true)\n\n                if (this.direction === DIRECTION_ENUM.TOP) {\n                    this.direction = DIRECTION_ENUM.LEFT\n                } else if (this.direction === DIRECTION_ENUM.BOTTOM) {\n                    this.direction = DIRECTION_ENUM.RIGHT\n                } else if (this.direction === DIRECTION_ENUM.LEFT) {\n                    this.direction = DIRECTION_ENUM.BOTTOM\n                } else if (this.direction === DIRECTION_ENUM.RIGHT) {\n                    this.direction = DIRECTION_ENUM.TOP\n                }\n                this.state = ENTITY_STATE_ENUM.TURNLEFT\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_MOVE_END)\n                break;\n            case ENUM_BOTTOM_CONTROLLER.TURNRIGHT:\n                if (this.direction === DIRECTION_ENUM.TOP) {\n                    this.direction = DIRECTION_ENUM.RIGHT\n                } else if (this.direction === DIRECTION_ENUM.BOTTOM) {\n                    this.direction = DIRECTION_ENUM.LEFT\n                } else if (this.direction === DIRECTION_ENUM.LEFT) {\n                    this.direction = DIRECTION_ENUM.TOP\n                } else if (this.direction === DIRECTION_ENUM.RIGHT) {\n                    this.direction = DIRECTION_ENUM.BOTTOM\n                }\n                this.state = ENTITY_STATE_ENUM.TURNRIGHT\n                EventMgr.Instance.emit(ENUM_EVENT.ENUM_MOVE_END)\n                break;\n\n            default:\n                break;\n        }\n    }\n\n    onSmokeHandler(type: ENUM_BOTTOM_CONTROLLER) {\n        EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHOW_SMOKE, this.x, this.y, type)\n    }\n\n    onAttackShake(type: SHAKE_TYPE_ENUM) {\n        EventMgr.Instance.emit(ENUM_EVENT.ENUM_SHAKE_SCREEN, type)\n    }\n}"]}