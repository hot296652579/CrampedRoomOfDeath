{"version":3,"sources":["file:///Users/super_javan/cocoscreator/CrampedRoomOfDeathDungeon/assets/Scripts/Burst/BurstStateMachine.ts"],"names":["_decorator","Animation","PARAMS_NAME_TYPE","getParamsInitTrigger","StateMachine","State","BASE_URL","ccclass","property","BurstStateMachine","init","animationCom","addComponent","initParams","initSateMachine","addAnimationEvent","Promise","all","waitList","params","set","IDLE","ATTACK","DEATH","stateMachine","run","currentSate","get","TURNLEFT","BLOCKFRONT","BLOCKTURNLEFT","value"],"mappings":"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","sourcesContent":["import { Component, _decorator, Node, AnimationClip, Animation, SpriteFrame, SpriteAtlas } from \"cc\";\nimport { ENUM_EVENT, ENUM_BOTTOM_CONTROLLER, FSM_PARAMS_TYPE_ENUM, PARAMS_NAME_TYPE, ENITIY_TYPE_ENUM, ENTITY_STATE_ENUM } from \"../../Enum\";\n// import { DataManager.Instance } from \"../Runtime/DataManager\";\nimport { EnitiyMgr } from \"../Base/EnitiyMgr\";\nimport { getParamsInitNumber, getParamsInitTrigger, StateMachine } from \"../Base/SateMachine\";\nimport State from \"../Base/State\";\n\nconst BASE_URL = 'texture/door/death/death'\nconst { ccclass, property } = _decorator;\n@ccclass('BurstStateMachine')\nexport class BurstStateMachine extends StateMachine {\n    async init() {\n        this.animationCom = this.addComponent(Animation)\n\n        this.initParams()\n        this.initSateMachine()\n        this.addAnimationEvent()\n\n        await Promise.all(this.waitList)\n    }\n\n    initParams() {\n        this.params.set(PARAMS_NAME_TYPE.IDLE, getParamsInitTrigger())\n        this.params.set(PARAMS_NAME_TYPE.ATTACK, getParamsInitTrigger())\n        this.params.set(PARAMS_NAME_TYPE.DEATH, getParamsInitTrigger())\n    }\n\n    initSateMachine() {\n        this.stateMachine.set(PARAMS_NAME_TYPE.IDLE, new State(this, BASE_URL,))\n        this.stateMachine.set(PARAMS_NAME_TYPE.ATTACK, new State(this, BASE_URL))\n        this.stateMachine.set(PARAMS_NAME_TYPE.DEATH, new State(this, BASE_URL))\n    }\n\n    addAnimationEvent() {\n\n    }\n\n    run() {\n        switch (this.currentSate) {\n            case this.stateMachine.get(PARAMS_NAME_TYPE.TURNLEFT):\n            case this.stateMachine.get(PARAMS_NAME_TYPE.BLOCKFRONT):\n            case this.stateMachine.get(PARAMS_NAME_TYPE.BLOCKTURNLEFT):\n\n            case this.stateMachine.get(PARAMS_NAME_TYPE.IDLE):\n                if (this.params.get(PARAMS_NAME_TYPE.IDLE).value) {\n                    this.currentSate = this.stateMachine.get(PARAMS_NAME_TYPE.IDLE)\n                } else if (this.params.get(PARAMS_NAME_TYPE.DEATH).value) {\n                    this.currentSate = this.stateMachine.get(PARAMS_NAME_TYPE.DEATH)\n                } else if (this.params.get(PARAMS_NAME_TYPE.ATTACK).value) {\n                    this.currentSate = this.stateMachine.get(PARAMS_NAME_TYPE.ATTACK)\n                }\n                else {\n                    this.currentSate = this.currentSate\n                }\n                break;\n\n            default:\n                this.currentSate = this.stateMachine.get(PARAMS_NAME_TYPE.IDLE)\n                break;\n        }\n    }\n}"]}