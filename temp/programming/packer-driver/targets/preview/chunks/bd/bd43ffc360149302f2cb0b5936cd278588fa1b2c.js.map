{"version":3,"sources":["file:///Users/super_javan/cocoscreator/CrampedRoomOfDeathDungeon/assets/Scripts/Burst/BurstMgr.ts"],"names":["_decorator","UITransform","ENTITY_STATE_ENUM","ENUM_EVENT","EnitiyMgr","EventMgr","DataManager","TILE_HEIGHT","TILE_WIDTH","BurstStateMachine","MOVE_SPEED","ccclass","property","BurstMgr","init","params","fsm","addComponent","transform","node","getComponent","setContentSize","onAttack","x","playerX","y","playerY","Instance","playerInfo","state","ATTACK","DEATH","update","setPosition","onLoad","addEventListen","ENUM_MOVE_END","onDestry","unEventListen"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAoBA,MAAAA,U,OAAAA,U;AAA0BC,MAAAA,W,OAAAA,W;;AACmBC,MAAAA,iB,iBAAAA,iB;AAAmBC,MAAAA,U,iBAAAA,U;;AAE3EC,MAAAA,S,iBAAAA,S;;AACFC,MAAAA,Q;;AAEAC,MAAAA,W;;AACEC,MAAAA,W,iBAAAA,W;AAAaC,MAAAA,U,iBAAAA,U;;AACbC,MAAAA,iB,iBAAAA,iB;;;;;;;;;4BAEIC,U,GAAa,IAAI,E;;OAExB;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;0BAEjBa,Q,WADZF,OAAO,CAAC,UAAD,C,gBAAR,MACaE,QADb;AAAA;AAAA,kCACwC;AAE9BC,QAAAA,IAAI,CAACC,MAAD,EAAkB;AAAA;AAAA;;AAAA;AACxB,YAAA,KAAI,CAACC,GAAL,GAAW,KAAI,CAACC,YAAL;AAAA;AAAA,uDAAX;AACA,kBAAM,KAAI,CAACD,GAAL,CAASF,IAAT,EAAN;;AAEA,6CAAWC,MAAX;;AACA,gBAAMG,SAAS,GAAG,KAAI,CAACC,IAAL,CAAUC,YAAV,CAAuBnB,WAAvB,CAAlB;;AACAiB,YAAAA,SAAS,CAACG,cAAV;AAAA;AAAA;AAAA;AAAA;AANwB;AAO3B;;AAEDC,QAAAA,QAAQ,GAAG;AACP,cAAM;AAAEC,YAAAA,CAAC,EAAEC,OAAL;AAAcC,YAAAA,CAAC,EAAEC;AAAjB,cAA6B;AAAA;AAAA,0CAAYC,QAAZ,CAAqBC,UAAxD;;AACA,cAAIJ,OAAO,IAAI,KAAKD,CAAhB,IAAqBG,OAAO,IAAI,KAAKD,CAArC,IAA0C,KAAKI,KAAL,IAAc;AAAA;AAAA,sDAAkBC,MAA9E,EAAsF;AAClF,iBAAKD,KAAL,GAAa;AAAA;AAAA,wDAAkBC,MAA/B;AACH,WAFD,MAEO,IAAI,KAAKD,KAAL,KAAe;AAAA;AAAA,sDAAkBC,MAArC,EAA6C;AAChD,iBAAKD,KAAL,GAAa;AAAA;AAAA,wDAAkBE,KAA/B;AACH;AACJ;;AAEDC,QAAAA,MAAM,GAAG;AACL,eAAKb,IAAL,CAAUc,WAAV,CAAsB,KAAKV,CAAL;AAAA;AAAA,uCAAtB,EAA2C,CAAC,KAAKE,CAAN;AAAA;AAAA,yCAA3C;AACH;;AAEDS,QAAAA,MAAM,GAAG;AACL;AAAA;AAAA,oCAASP,QAAT,CAAkBQ,cAAlB,CAAiC;AAAA;AAAA,wCAAWC,aAA5C,EAA2D,KAAKd,QAAhE,EAA0E,IAA1E;AACH;;AAEDe,QAAAA,QAAQ,GAAG;AACP;AAAA;AAAA,oCAASV,QAAT,CAAkBW,aAAlB,CAAgC;AAAA;AAAA,wCAAWF,aAA3C,EAA0D,KAAKd,QAA/D;AACH;;AA9BmC,O","sourcesContent":["import { Component, _decorator, Node, Sprite, UITransform, Animation, SpriteAtlas, AnimationClip, animation, SpriteFrame, Texture2D, math, TiledUserNodeData } from \"cc\";\nimport { DIRECTION_ENUM, DIRECTION_ORDER_ENUM, ENITIY_TYPE_ENUM, ENTITY_STATE_ENUM, ENUM_EVENT, ENUM_BOTTOM_CONTROLLER, PARAMS_NAME_TYPE } from \"../../Enum\";\nimport { IEnitiy } from \"../../Levels\";\nimport { EnitiyMgr } from \"../Base/EnitiyMgr\";\nimport EventMgr from \"../Base/EventMgr\";\nimport { PlayerStateMachine } from \"../Player/PlayerStateMachine\";\nimport DataManager from \"../Runtime/DataManager\";\nimport { TILE_HEIGHT, TILE_WIDTH } from \"../TileMap/TileManager\";\nimport { BurstStateMachine } from \"./BurstStateMachine\";\n\nexport const MOVE_SPEED = 1 / 10\n\nconst { ccclass, property } = _decorator;\n@ccclass('BurstMgr')\nexport class BurstMgr extends EnitiyMgr {\n\n    async init(params: IEnitiy) {\n        this.fsm = this.addComponent(BurstStateMachine)\n        await this.fsm.init()\n\n        super.init(params)\n        const transform = this.node.getComponent(UITransform)\n        transform.setContentSize(TILE_WIDTH, TILE_HEIGHT)\n    }\n\n    onAttack() {\n        const { x: playerX, y: playerY } = DataManager.Instance.playerInfo\n        if (playerX == this.x && playerY == this.y && this.state != ENTITY_STATE_ENUM.ATTACK) {\n            this.state = ENTITY_STATE_ENUM.ATTACK\n        } else if (this.state === ENTITY_STATE_ENUM.ATTACK) {\n            this.state = ENTITY_STATE_ENUM.DEATH\n        }\n    }\n\n    update() {\n        this.node.setPosition(this.x * TILE_WIDTH, -this.y * TILE_HEIGHT)\n    }\n\n    onLoad() {\n        EventMgr.Instance.addEventListen(ENUM_EVENT.ENUM_MOVE_END, this.onAttack, this)\n    }\n\n    onDestry() {\n        EventMgr.Instance.unEventListen(ENUM_EVENT.ENUM_MOVE_END, this.onAttack)\n    }\n\n\n}"]}