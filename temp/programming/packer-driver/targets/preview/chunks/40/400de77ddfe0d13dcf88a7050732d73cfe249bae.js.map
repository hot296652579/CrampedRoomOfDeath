{"version":3,"sources":["file:///Users/super_javan/cocoscreator/CrampedRoomOfDeathDungeon/assets/Scripts/Scene/UILoadingScene.ts"],"names":["_decorator","Component","director","ProgressBar","resources","SCENE_ENUM","ccclass","property","LoadingManager","onLoad","preLoad","preloadScene","START","preloadDir","cur","total","bar","progress","err","Promise","rs","setTimeout","loadScene"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;;AAC9CC,MAAAA,U,iBAAAA,U;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;gCAGjBQ,c,WADZF,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ,CAACJ,WAAD,C,2BAFb,MACaK,cADb,SACoCP,SADpC,CAC8C;AAAA;AAAA;;AAAA;AAAA;;AAI1CQ,QAAAA,MAAM,GAAG;AACL,eAAKC,OAAL;AACH;;AACDA,QAAAA,OAAO,GAAG;AAAA;;AACNR,UAAAA,QAAQ,CAACS,YAAT,CAAsB;AAAA;AAAA,wCAAWC,KAAjC;AACAR,UAAAA,SAAS,CAACS,UAAV,CACI,SADJ,EAEI,CAACC,GAAD,EAAMC,KAAN,KAAgB;AACZ,iBAAKC,GAAL,CAASC,QAAT,GAAoBH,GAAG,GAAGC,KAA1B;AACH,WAJL,iCAKI,WAAMG,GAAN,EAAa;AACT,gBAAIA,GAAJ,EAAS;AACL,oBAAM,IAAIC,OAAJ,CAAYC,EAAE,IAAI;AACpBC,gBAAAA,UAAU,CAACD,EAAD,EAAK,IAAL,CAAV;AACH,eAFK,CAAN;;AAGA,cAAA,KAAI,CAACV,OAAL;;AACA;AACH;;AAEDR,YAAAA,QAAQ,CAACoB,SAAT,CAAmB;AAAA;AAAA,0CAAWV,KAA9B;AACH,WAfL;AAiBH;;AA1ByC,O","sourcesContent":["import { _decorator, Component, director, ProgressBar, resources } from 'cc'\nimport { SCENE_ENUM } from '../../Enum'\nconst { ccclass, property } = _decorator\n\n@ccclass('LoadingManager')\nexport class LoadingManager extends Component {\n    @property(ProgressBar)\n    bar: ProgressBar\n\n    onLoad() {\n        this.preLoad()\n    }\n    preLoad() {\n        director.preloadScene(SCENE_ENUM.START)\n        resources.preloadDir(\n            'texture',\n            (cur, total) => {\n                this.bar.progress = cur / total\n            },\n            async err => {\n                if (err) {\n                    await new Promise(rs => {\n                        setTimeout(rs, 1000)\n                    })\n                    this.preLoad()\n                    return\n                }\n\n                director.loadScene(SCENE_ENUM.START)\n            },\n        )\n    }\n}"]}