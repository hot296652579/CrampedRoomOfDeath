{"version":3,"sources":["file:///Users/super_javan/cocoscreator/CrampedRoomOfDeathDungeon/assets/Scripts/Base/EnitiyMgr.ts"],"names":["Component","_decorator","Sprite","UITransform","DIRECTION_ORDER_ENUM","PARAMS_NAME_TYPE","TILE_HEIGHT","TILE_WIDTH","randomNameByLen","MOVE_SPEED","ccclass","property","EnitiyMgr","id","x","y","fsm","_direction","_state","_type","direction","newDirection","console","log","setParams","DIRECTION","state","newState","type","newType","init","params","sprite","addComponent","sizeMode","SizeMode","CUSTOM","transform","node","getComponent","setContentSize","onLoad","onDestroy","update","setPosition"],"mappings":"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","sourcesContent":["import { Component, _decorator, Node, Sprite, UITransform, Animation, SpriteAtlas, AnimationClip, animation, SpriteFrame, Texture2D, math } from \"cc\";\nimport { DIRECTION_ENUM, DIRECTION_ORDER_ENUM, ENITIY_TYPE_ENUM, ENTITY_STATE_ENUM, ENUM_EVENT, ENUM_BOTTOM_CONTROLLER, PARAMS_NAME_TYPE } from \"../../Enum\";\nimport levels, { IEnitiy, ILevel } from \"../../Levels\";\nimport EventMgr from \"../Base/EventMgr\";\nimport ResourceLoadMgr from \"../Base/ResourceLoadMgr\";\nimport DataManager from \"../Runtime/DataManager\";\nimport { TILE_HEIGHT, TILE_WIDTH } from \"../TileMap/TileManager\";\n// import { DataManager.Instance } from \"../Runtime/DataManager\";\nimport { TileMapManager } from \"../TileMap/TileMapManager\";\nimport { createNewNode, randomNameByLen } from \"../Utils\";\nimport { PlayerStateMachine } from \"../Player/PlayerStateMachine\";\nimport { StateMachine } from \"./SateMachine\";\n\nexport const MOVE_SPEED = 1 / 10\n\nconst { ccclass, property } = _decorator;\n@ccclass('EnitiyMgr')\nexport class EnitiyMgr extends Component {\n    id: string = randomNameByLen(12)\n    x: number = 0\n    y: number = 0\n\n    fsm: StateMachine = null\n\n    _direction: DIRECTION_ENUM\n    _state: ENTITY_STATE_ENUM\n    _type: ENITIY_TYPE_ENUM\n\n    get direction() {\n        return this._direction\n    }\n    set direction(newDirection) {\n        console.log('newDirection', newDirection)\n        this._direction = newDirection\n        this.fsm.setParams(PARAMS_NAME_TYPE.DIRECTION, DIRECTION_ORDER_ENUM[this._direction])\n    }\n\n    get state() {\n        return this._state\n    }\n    set state(newState) {\n        this._state = newState\n        this.fsm.setParams(this.state, true)\n    }\n\n    get type() {\n        return this._type\n    }\n    set type(newType) {\n        this._type = newType\n    }\n\n    async init(params: IEnitiy) {\n        const sprite = this.addComponent(Sprite)\n        sprite.sizeMode = Sprite.SizeMode.CUSTOM\n        const transform = this.node.getComponent(UITransform)\n        transform.setContentSize(TILE_WIDTH * 4, TILE_HEIGHT * 4)\n\n        this.x = params.x\n        this.y = params.y\n        this.direction = params.direction\n        this.state = params.state\n        this.type = params.type\n    }\n\n    onLoad() {\n\n    }\n\n    onDestroy() {\n\n    }\n\n    update() {\n        this.node.setPosition(this.x * TILE_WIDTH - TILE_WIDTH * 1.5, -this.y * TILE_HEIGHT + TILE_HEIGHT * 1.5)\n    }\n}"]}