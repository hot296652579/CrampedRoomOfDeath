{"version":3,"sources":["file:///Users/super_javan/cocoscreator/CrampedRoomOfDeathDungeon/assets/Scripts/Scene/UIBattleScene.ts"],"names":["Component","_decorator","levels","DataManagerInstance","TileMapManager","createNewNode","TILE_WIDTH","TILE_HEIGHT","ccclass","property","UIBattleScene","level","stage","start","initLevel","generateStage","generateTileMap","fitPos","mapInfo","mapColumCount","length","mapRowCount","stageNode","setParent","node","tileMapNode","tileMapManager","addComponent","init","disX","disY","setPosition"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,U,OAAAA,U;;AACbC,MAAAA,M;;AACEC,MAAAA,mB,iBAAAA,mB;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;;;AAEHC,MAAAA,U,GAAa,E;AACbC,MAAAA,W,GAAc,E;OACd;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;+BAEjBS,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb,SACmCV,SADnC,CAC6C;AAAA;AAAA;AAAA,eACzCW,KADyC;AAAA,eAEzCC,KAFyC;AAAA;;AAGzCC,QAAAA,KAAK,GAAG;AACJ,eAAKC,SAAL;AACA,eAAKC,aAAL;AACA,eAAKC,eAAL;AACA,eAAKC,MAAL;AACH;;AAEDH,QAAAA,SAAS,GAAG;AACR,cAAMH,KAAK,GAAG;AAAA;AAAA,0CAAe,CAAf,CAAd;;AAEA,cAAIA,KAAJ,EAAW;AACP,iBAAKA,KAAL,GAAaA,KAAb;AACA;AAAA;AAAA,4DAAoBO,OAApB,GAA8BP,KAAK,CAACO,OAApC;AACA;AAAA;AAAA,4DAAoBC,aAApB,GAAoCR,KAAK,CAACO,OAAN,CAAc,CAAd,EAAiBE,MAArD,CAHO,CAGqD;;AAC5D;AAAA;AAAA,4DAAoBC,WAApB,GAAkCV,KAAK,CAACO,OAAN,CAAcE,MAAhD;AACH;AACJ;;AAEDL,QAAAA,aAAa,GAAG;AACZ,cAAMO,SAAS,GAAG;AAAA;AAAA,+CAAlB;AACAA,UAAAA,SAAS,CAACC,SAAV,CAAoB,KAAKC,IAAzB;AACA,eAAKZ,KAAL,GAAaU,SAAb;AACH;;AAEDN,QAAAA,eAAe,GAAG;AACd,cAAMS,WAAW,GAAG;AAAA;AAAA,+CAApB;AACAA,UAAAA,WAAW,CAACF,SAAZ,CAAsB,KAAKX,KAA3B;AACA,cAAMc,cAAc,GAAGD,WAAW,CAACE,YAAZ;AAAA;AAAA,+CAAvB;AACAD,UAAAA,cAAc,CAACE,IAAf;AACH;;AAEDX,QAAAA,MAAM,GAAG;AACL,cAAM;AAAEE,YAAAA,aAAF;AAAiBE,YAAAA;AAAjB;AAAA;AAAA,wDAAN;AACA,cAAMQ,IAAI,GAAGvB,UAAU,GAAGe,WAAb,GAA2B,CAAxC;AACA,cAAMS,IAAI,GAAGvB,WAAW,GAAGY,aAAd,GAA8B,CAA3C;AACA,eAAKP,KAAL,CAAWmB,WAAX,CAAuB,CAACF,IAAxB,EAA8BC,IAA9B;AACH;;AAvCwC,O","sourcesContent":["import { Component, _decorator, Node } from \"cc\";\nimport levels, { ILevel } from \"../../Levels\";\nimport { DataManagerInstance } from \"../Runtime/DataManager\";\nimport { TileMapManager } from \"../TileMap/TileMapManager\";\nimport { createNewNode } from \"../Utils\";\n\nconst TILE_WIDTH = 55\nconst TILE_HEIGHT = 55\nconst { ccclass, property } = _decorator;\n@ccclass('UIBattleScene')\nexport class UIBattleScene extends Component {\n    level: ILevel\n    stage: Node\n    start() {\n        this.initLevel()\n        this.generateStage()\n        this.generateTileMap()\n        this.fitPos()\n    }\n\n    initLevel() {\n        const level = levels[`level${1}`]\n\n        if (level) {\n            this.level = level\n            DataManagerInstance.mapInfo = level.mapInfo\n            DataManagerInstance.mapColumCount = level.mapInfo[0].length //åˆ—\n            DataManagerInstance.mapRowCount = level.mapInfo.length\n        }\n    }\n\n    generateStage() {\n        const stageNode = createNewNode()\n        stageNode.setParent(this.node)\n        this.stage = stageNode\n    }\n\n    generateTileMap() {\n        const tileMapNode = createNewNode()\n        tileMapNode.setParent(this.stage)\n        const tileMapManager = tileMapNode.addComponent(TileMapManager)\n        tileMapManager.init()\n    }\n\n    fitPos() {\n        const { mapColumCount, mapRowCount } = DataManagerInstance\n        const disX = TILE_WIDTH * mapRowCount / 2\n        const disY = TILE_HEIGHT * mapColumCount / 2\n        this.stage.setPosition(-disX, disY)\n    }\n}"]}